<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCL-90 å¿ƒç†å¥åº·æµ‹è¯„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* --- ç²¾ç®€ç§»åŠ¨ä¼˜å…ˆä¸»é¢˜ --- */
        :root {
            --primary-green: #2db795; --primary-green-dark: #249d7f; 
            --primary-blue: #3498db; --primary-orange: #fd7e14;
            --bg-color: #f6fbf9; --text-color: #2a3f38; 
            --text-secondary: #5c6e66; --border-color: #e2e8e5;
            --card-bg: #ffffff; --error-color: #e57373;
            --warning-color: #ffc107; --severe-color: #dc3545;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        body { font-family: var(--font-family); background-color: var(--bg-color); 
            color: var(--text-color); line-height: 1.7; margin: 0; padding: 20px 0; }
        .container { max-width: 800px; margin: 0 auto; padding: 0 15px; }
        .card { background-color: var(--card-bg); border-radius: 20px; padding: 30px; 
            box-shadow: 0 8px 30px rgba(45, 183, 149, 0.1); margin-bottom: 25px; border: 1px solid var(--border-color); }
        h1, h2, h3, h4 { color: var(--primary-green-dark); text-align: center; margin-top: 0; }
        h1 { font-size: 30px; margin-bottom: 15px; font-weight: 600; }
        .btn { background: linear-gradient(45deg, #2db795, #34d0a5); color: white; 
            padding: 16px 24px; border: none; border-radius: 14px; cursor: pointer; 
            font-size: 17px; font-weight: 600; text-align: center; transition: all 0.3s ease; 
            width: 100%; box-sizing: border-box; box-shadow: 0 5px 15px rgba(45, 183, 149, 0.3); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(45, 183, 149, 0.4); }
        .btn-secondary { background: #f0f2f1; color: var(--text-secondary); box-shadow: none; }
        .btn-secondary:hover { background: #e4e7e6; transform: translateY(-2px); }
        .btn-small { width: auto; padding: 10px 20px; font-size: 15px; margin: 0 5px; }
        .error-message { color: var(--error-color); text-align: center; margin-top: 12px; 
            font-weight: 500; min-height: 22px; }
        .success-message { color: var(--primary-green); text-align: center; margin-top: 12px; 
            font-weight: 500; }
        .info-message { color: var(--primary-blue); text-align: center; margin-top: 12px; 
            font-weight: 500; }
        
        /* --- å…‘æ¢ç ç›¸å…³æ ·å¼ --- */
        .code-display { background: linear-gradient(135deg, #f8faf9, #e6f7f3); 
            border: 2px dashed var(--primary-green); border-radius: 16px; 
            padding: 25px; text-align: center; margin: 25px 0; 
            animation: fadeIn 0.5s ease-out; }
        .code-text { font-size: 32px; font-weight: bold; letter-spacing: 3px; 
            color: var(--primary-green-dark); margin: 15px 0; 
            background: white; padding: 15px; border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .code-info { font-size: 14px; color: var(--text-secondary); margin-top: 15px; }
        .code-info p { margin: 8px 0; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .copy-btn { margin-top: 20px; }
        
        /* --- ç­”é¢˜æµç¨‹æ ·å¼ --- */
        #progress-container { width: 100%; background-color: #e0e0e0; border-radius: 10px; 
            margin-bottom: 20px; overflow: hidden; height: 10px; }
        #progress-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #2db795, #34d0a5); 
            border-radius: 10px; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        #progress-text { text-align: center; margin-bottom: 20px; color: var(--text-secondary); 
            font-size: 16px; }
        .question-content { margin-bottom: 25px; }
        .question-text { font-weight: 600; font-size: 1.3em; margin-bottom: 25px; text-align: center; 
            line-height: 1.5; color: var(--text-color); }
        .options-group { display: flex; flex-direction: column; gap: 12px; }
        .options-group label { display: block; cursor: pointer; padding: 16px 20px; 
            border-radius: 14px; background: #f8faf9; transition: all 0.3s ease; 
            border: 2px solid var(--border-color); font-size: 16px; }
        .options-group label:hover { border-color: var(--primary-green); background: #e6f7f3; }
        .options-group input[type="radio"] { display: none; }
        .options-group input[type="radio"]:checked + label { 
            background: linear-gradient(135deg, #2db795, #34d0a5); color: white; 
            border-color: var(--primary-green); transform: scale(1.02); 
            box-shadow: 0 6px 20px rgba(45, 183, 149, 0.3); }
        .navigation-buttons { display: flex; justify-content: space-between; gap: 12px; }
        .navigation-buttons .btn { width: 100%; }
        
        /* --- æŠ¥å‘Šé¡µæ ·å¼ --- */
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; 
            text-align: center; margin: 30px 0; }
        .stat-box { background: #f8faf9; padding: 20px; border-radius: 16px; 
            border: 1px solid var(--border-color); }
        .stat-box h4 { margin: 0 0 10px; font-size: 14px; color: var(--text-secondary); }
        .stat-box p { font-size: 28px; font-weight: 700; margin: 0; }
        .stat-total { color: var(--primary-green-dark); }
        .stat-average { color: var(--primary-blue); }
        .stat-positive { color: var(--primary-orange); }
        .stat-percentage { color: var(--severe-color); }
        
        .overall-status { text-align: center; padding: 30px; background: linear-gradient(135deg, #f8faf9, #e6f7f3); 
            border-radius: 20px; margin: 30px 0; border: 2px solid var(--border-color); }
        .status-badge { display: inline-block; padding: 12px 30px; border-radius: 50px; 
            font-size: 24px; font-weight: bold; margin: 15px 0; }
        
        .factor-table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 25px 0; }
        .factor-table th { background: #f0f7f5; padding: 16px; text-align: left; 
            border-bottom: 2px solid var(--border-color); font-weight: 600; }
        .factor-table td { padding: 14px 16px; border-bottom: 1px solid var(--border-color); }
        .factor-table tr:hover { background: #f8faf9; }
        
        .explanation-card { background: #f8faf9; border-radius: 16px; padding: 25px; 
            margin-bottom: 20px; border-left: 5px solid var(--primary-green); }
        .explanation-advice { border-top: 2px solid var(--border-color); margin-top: 20px; 
            padding-top: 20px; }
        
        #radar-chart-container { position: relative; width: 100%; max-width: 500px; 
            margin: 30px auto; aspect-ratio: 1 / 1; }
        
        .grading-standard { display: flex; justify-content: space-between; gap: 10px; 
            margin: 25px 0; }
        .grade-item { flex: 1; text-align: center; padding: 15px; border-radius: 12px; 
            color: white; font-weight: bold; }
        
        .loading { text-align: center; padding: 40px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary-green); 
            border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; 
            margin: 20px auto; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } 
                          to { opacity: 1; transform: translateY(0); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 768px) {
            .card { padding: 20px; }
            h1 { font-size: 26px; }
            .code-text { font-size: 26px; }
            .stats-grid { grid-template-columns: 1fr; gap: 15px; }
            .grading-standard { flex-direction: column; }
            .factor-table { font-size: 14px; }
            .factor-table th, .factor-table td { padding: 12px 8px; }
        }
        
        @media (max-width: 480px) {
            .card { padding: 16px; }
            h1 { font-size: 22px; }
            .code-text { font-size: 22px; letter-spacing: 2px; padding: 12px; }
            .options-group label { padding: 14px 16px; font-size: 15px; }
            .question-text { font-size: 1.2em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- åˆå§‹ç•Œé¢ï¼šç”Ÿæˆå…‘æ¢ç  -->
        <div id="initScreen">
            <div class="card">
                <h1>SCL-90 å¿ƒç†å¥åº·æµ‹è¯„</h1>
                <p style="text-align: center; margin-bottom: 20px; color: var(--text-secondary);">
                    æœ¬æµ‹è¯„æ—¨åœ¨å¸®åŠ©æ‚¨äº†è§£è¿‘æœŸçš„å¿ƒç†çŠ¶æ€ã€‚<br>è¯·æ ¹æ®<strong>æœ€è¿‘ä¸€å‘¨</strong>çš„çœŸå®æ„Ÿå—ä½œç­”ã€‚
                </p>
                
                <div id="codeGenerationSection">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px; color: var(--text-secondary);">
                            æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆä¸“å±æµ‹è¯„ç ...
                        </p>
                    </div>
                    
                    <div class="code-display" style="display: none;">
                        <h3>æ‚¨çš„ä¸“å±æµ‹è¯„ç </h3>
                        <div class="code-text" id="generatedCode"></div>
                        <div class="code-info">
                            <p>ğŸ”’ æ­¤ç 24å°æ—¶å†…æœ‰æ•ˆï¼Œä»…é™æœ¬è®¾å¤‡ä½¿ç”¨</p>
                            <p>ğŸ’¾ æ‚¨å¯ä»¥å¤åˆ¶ä¿å­˜ï¼Œé˜²æ­¢é¡µé¢åˆ·æ–°ä¸¢å¤±</p>
                            <p>ğŸ”„ åŒä¸€è®¾å¤‡24å°æ—¶å†…å¯é‡å¤æµ‹è¯•</p>
                        </div>
                        <button class="btn copy-btn" onclick="copyCodeToClipboard()">
                            ğŸ“‹ å¤åˆ¶å…‘æ¢ç 
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn" id="startTestBtn" onclick="startTest()" style="display: none;">
                        å¼€å§‹æµ‹è¯„
                    </button>
                </div>
                
                <div id="existingCodeSection" style="display: none; margin-top: 25px; padding-top: 25px; 
                     border-top: 1px solid var(--border-color);">
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 15px;">
                        æ‚¨å·²æœ‰æœªè¿‡æœŸçš„å…‘æ¢ç ï¼š
                    </p>
                    <div style="background: #f8faf9; padding: 15px; border-radius: 12px; 
                         text-align: center; margin-bottom: 15px;">
                        <code id="existingCode" style="font-size: 18px; font-weight: bold; 
                              color: var(--primary-green);"></code>
                    </div>
                    <button class="btn btn-secondary" onclick="useExistingCode()">
                        ä½¿ç”¨æ­¤ç å¼€å§‹æµ‹è¯•
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ç­”é¢˜ç•Œé¢ -->
        <div id="testScreen" style="display: none;"></div>
        
        <!-- ç»“æœç•Œé¢ -->
        <div id="resultScreen" style="display: none;"></div>
    </div>

    <script>
        // ==================== é…ç½®å’Œå¸¸é‡ ====================
        const APP_NAME = 'SCL90_TEST';
        
        // SCL-90 å› å­å®šä¹‰
        const SCL90_FACTORS = {
            "èº¯ä½“åŒ–": [1, 4, 12, 27, 40, 42, 48, 49, 52, 53, 56, 58],
            "å¼ºè¿«ç—‡çŠ¶": [3, 9, 10, 28, 38, 45, 46, 51, 55, 65],
            "äººé™…å…³ç³»æ•æ„Ÿ": [6, 21, 34, 36, 37, 41, 61, 69, 73],
            "æŠ‘éƒ": [5, 14, 15, 20, 22, 26, 29, 30, 31, 32, 54, 71, 79],
            "ç„¦è™‘": [2, 17, 23, 33, 39, 57, 72, 78, 80, 86],
            "æ•Œå¯¹": [11, 24, 63, 67, 74, 81],
            "ææ€–": [13, 25, 47, 50, 70, 75, 82],
            "åæ‰§": [8, 18, 43, 68, 76, 83],
            "ç²¾ç¥ç—…æ€§": [7, 16, 35, 62, 77, 84, 85, 87, 88, 90]
        };
        
        // å››çº§çŸ¥è¯†åº“
        const KNOWLEDGE_BASE_V2 = {
            "èº¯ä½“åŒ–": {
                normal: { symptoms: "æ‚¨èƒ½å¾ˆå¥½åœ°åˆ†è¾¨ç”Ÿç†ä¸é€‚ä¸æƒ…ç»ªæ³¢åŠ¨ï¼Œèº«ä½“æ„Ÿè§‰å¹³ç¨³ï¼Œæ˜¯èº«å¿ƒå¥åº·çš„è‰¯å¥½æ ‡å¿—ã€‚", advice: "è¯·ç»§ç»­ä¿æŒå¯¹èº«ä½“ä¿¡å·çš„è§‰å¯Ÿï¼Œç»“åˆè§„å¾‹ä½œæ¯ä¸é€‚åº¦é”»ç‚¼ï¼Œç»´æŒèº«å¿ƒå¹³è¡¡ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šæ„Ÿåˆ°ä¸€äº›æ— æ³•è§£é‡Šçš„èº«ä½“ä¸é€‚ï¼Œå¦‚å¤´ç—›ã€ä¹åŠ›ç­‰ï¼Œè¿™æœ‰æ—¶æ˜¯æƒ…ç»ªå‹åŠ›çš„æ—©æœŸä¿¡å·ã€‚", advice: "å°è¯•å¢åŠ æ•£æ­¥ã€å¬éŸ³ä¹ç­‰æ”¾æ¾æ´»åŠ¨ï¼Œè®°å½•ä¸é€‚æ„Ÿå‡ºç°çš„æƒ…å¢ƒï¼Œæœ‰åŠ©äºç†è§£å…¶ä¸æƒ…ç»ªçš„å…³è”ã€‚" },
                moderate: { symptoms: "æ‚¨ä¼¼ä¹æ¯”è¾ƒé¢‘ç¹åœ°ä½“éªŒåˆ°èº«ä½“ä¸Šçš„å›°æ‰°ï¼Œè¿™äº›ä¸é€‚å¯èƒ½å·²å¼€å§‹å½±å“æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»å’Œç²¾åŠ›ã€‚", advice: "å»ºè®®æ‚¨ä¸»åŠ¨å…³æ³¨æƒ…ç»ªçš„è°ƒèŠ‚ï¼Œå­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§ã€‚ä¸ä¿¡ä»»çš„æœ‹å‹å€¾è¯‰æˆ–è¿›è¡Œæ¸©å’Œè¿åŠ¨ï¼Œå¯èƒ½å¸¦æ¥ç¼“è§£ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½æ­£è¢«æŒç»­çš„ã€å¤šæ ·åŒ–çš„èº«ä½“ä¸é€‚æ‰€å›°æ‰°ï¼Œä¸¥é‡å½±å“äº†ç”Ÿæ´»è´¨é‡ï¼Œå¹¶å¯èƒ½ä¸ºæ­¤æ„Ÿåˆ°ç„¦è™‘ã€‚", advice: "å¼ºçƒˆå»ºè®®æ‚¨è¿›è¡Œå…¨é¢çš„èº«ä½“æ£€æŸ¥ä»¥æ’é™¤ç”Ÿç†é—®é¢˜ï¼Œå¹¶ä¸å¿ƒç†ä¸“ä¸šäººå£«æ¢è®¨ç—‡çŠ¶èƒŒåçš„æƒ…ç»ªæ ¹æºã€‚" }
            },
            "å¼ºè¿«ç—‡çŠ¶": {
                normal: { symptoms: "æ‚¨çš„æ€ç»´æ¸…æ™°ä¸”å¯Œæœ‰å¼¹æ€§ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°æ§åˆ¶æ— æ„ä¹‰çš„é‡å¤æƒ³æ³•æˆ–è¡Œä¸ºï¼Œä¸“æ³¨äºé‡è¦äº‹åŠ¡ã€‚", advice: "ä¿æŒå¼€æ”¾å’Œæ¥çº³çš„å¿ƒæ€ï¼Œå…è®¸æ€ç»´çš„è‡ªç„¶æµåŠ¨ï¼Œæ˜¯é¢„é˜²å¼ºè¿«æ€ç»´çš„æœ‰æ•ˆæ–¹æ³•ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šåå¤æ£€æŸ¥æˆ–æ€è€ƒæŸäº›äº‹æƒ…ï¼Œä½†è¿™é€šå¸¸ä¸ä¼šä¸¥é‡å¹²æ‰°æ‚¨çš„ç”Ÿæ´»ï¼Œå¯èƒ½æ˜¯å‹åŠ›å¢å¤§æ—¶çš„è¡¨ç°ã€‚", advice: "å½“è§‰å¯Ÿåˆ°é‡å¤æƒ³æ³•æ—¶ï¼Œå°è¯•æ·±å‘¼å¸å¹¶æ¸©å’Œåœ°å°†æ³¨æ„åŠ›è½¬ç§»ã€‚ç»ƒä¹ æ­£å¿µæœ‰åŠ©äºå‡å°‘ä¸å¿…è¦çš„æ€ç»´çº ç¼ ã€‚" },
                moderate: { symptoms: "æŸäº›ä¸å¿…è¦çš„æƒ³æ³•æˆ–è¡Œä¸ºå¯èƒ½å·²å¼€å§‹å›°æ‰°æ‚¨ï¼Œæ‚¨éœ€è¦èŠ±è´¹ä¸€äº›ç²¾åŠ›å»æŠµæŠ—ï¼Œè¿™å¯èƒ½è®©æ‚¨æ„Ÿåˆ°ç–²æƒ«ã€‚", advice: "å°è¯•'å»¶è¿Ÿæ»¡è¶³'æŠ€å·§ï¼Œå½“æœ‰å¼ºè¿«å†²åŠ¨æ—¶ï¼Œå‘Šè¯‰è‡ªå·±'ç­‰15åˆ†é’Ÿå†åš'ã€‚å¢åŠ ä½“è‚²é”»ç‚¼å¯æœ‰æ•ˆé‡Šæ”¾å¿ƒç†èƒ½é‡ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½æ­£ä¸å¼ºçƒˆçš„ã€ä¾µå…¥æ€§çš„å¼ºè¿«æ€ç»´æˆ–è¡Œä¸ºä½œæ–—äº‰ï¼Œå®ƒä»¬å æ®äº†æ‚¨å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå¹¶å¯¼è‡´æ˜æ˜¾ç„¦è™‘ã€‚", advice: "è®¤çŸ¥è¡Œä¸ºç–—æ³•ï¼ˆCBTï¼‰ä¸­çš„æš´éœ²ä¸ååº”é¢„é˜²ï¼ˆERPï¼‰æŠ€æœ¯éå¸¸æœ‰æ•ˆï¼Œè¯·ä¸ä¸“ä¸šçš„å¿ƒç†å’¨è¯¢å¸ˆè¿›è¡Œæ¢è®¨ã€‚" }
            },
            "äººé™…å…³ç³»æ•æ„Ÿ": {
                normal: { symptoms: "æ‚¨åœ¨äººé™…äº¤å¾€ä¸­æ„Ÿåˆ°è‡ªä¿¡å’Œèˆ’é€‚ï¼Œèƒ½å¤Ÿå®¢è§‚åœ°è§£è¯»ä»–äººçš„è¨€è¡Œï¼Œæ‹¥æœ‰å¥åº·çš„ä¸ªäººè¾¹ç•Œã€‚", advice: "ç»§ç»­çè§†å’Œç»´æŠ¤æ‚¨å¥åº·çš„äººé™…å…³ç³»ç½‘ç»œï¼Œè¿™æ˜¯å®è´µçš„ç¤¾ä¼šæ”¯æŒç³»ç»Ÿã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šè¿‡åº¦è§£è¯»ä»–äººçš„è¨€è¡Œï¼Œæˆ–åœ¨ç¤¾äº¤åœºåˆæ„Ÿåˆ°äº›è®¸ä¸è‡ªåœ¨ï¼Œä½†é€šå¸¸èƒ½å¤Ÿå¾ˆå¿«è°ƒæ•´ã€‚", advice: "åœ¨ä¸äººäº¤å¾€åï¼Œå°è¯•å®¢è§‚åœ°å¤ç›˜ï¼ŒåŒºåˆ†'äº‹å®'å’Œè‡ªå·±çš„'çŒœæµ‹'ã€‚ç»ƒä¹ è‡ªæˆ‘è‚¯å®šï¼Œå‡å°‘å¯¹ä»–äººè¯„ä»·çš„ä¾èµ–ã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æ—¶å¸¸æ„Ÿåˆ°åˆ«äººåœ¨è¯„è®ºæˆ–å¦å®šè‡ªå·±ï¼Œå®¹æ˜“åœ¨å…³ç³»ä¸­æ„Ÿåˆ°å—ä¼¤ï¼Œå¹¶å¯èƒ½å› æ­¤å›é¿éƒ¨åˆ†ç¤¾äº¤ã€‚", advice: "å­¦ä¹ å»ºç«‹å¥åº·çš„ä¸ªäººè¾¹ç•Œï¼Œå¹¶ç»ƒä¹ ç›´æ¥è€Œæ¸©å’Œåœ°è¡¨è¾¾è‡ªå·±çš„æ„Ÿå—å’Œéœ€æ±‚ã€‚ç›¸å…³çš„äººé™…æ²Ÿé€šä¹¦ç±ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½å¯¹ä»–äººè¯„ä»·æ„Ÿåˆ°æåº¦æ•æ„Ÿå’Œç—›è‹¦ï¼Œå¸¸å¸¸æ„Ÿåˆ°è‡ªå‘ã€è¢«å­¤ç«‹ï¼Œäººé™…äº¤å¾€æˆä¸ºä¸€ç§æ²‰é‡çš„è´Ÿæ‹…ã€‚", advice: "ä¸å¿ƒç†å’¨è¯¢å¸ˆä¸€èµ·æ¢è®¨è¿™ç§æ•æ„ŸèƒŒåå¯èƒ½å­˜åœ¨çš„æ·±å±‚åŸå› ï¼ˆå¦‚æ ¸å¿ƒä¿¡å¿µï¼‰ï¼Œæ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚" }
            },
            "æŠ‘éƒ": {
                normal: { symptoms: "æ‚¨æƒ…ç»ªç¨³å®šï¼Œå¯¹ç”Ÿæ´»å……æ»¡å…´è¶£å’Œæ´»åŠ›ï¼Œèƒ½å¤Ÿä»æ—¥å¸¸æ´»åŠ¨ä¸­è·å¾—ä¹è¶£å’Œæ»¡è¶³æ„Ÿã€‚", advice: "ä¿æŒç§¯æçš„ç”Ÿæ´»ä¹ æƒ¯å’Œç¤¾äº¤è”ç³»ï¼Œè¿™äº›æ˜¯é¢„é˜²æƒ…ç»ªä½è½çš„'å¿ƒç†ç–«è‹—'ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šæ„Ÿåˆ°æƒ…ç»ªä½è½ã€ç¼ºä¹åŠ¨åŠ›ï¼Œä½†è¿™äº›æ„Ÿè§‰é€šå¸¸æ˜¯çŸ­æš‚ä¸”ä¸ç‰¹å®šäº‹ä»¶ç›¸å…³çš„ã€‚", advice: "ç¡®ä¿å……è¶³çš„ç¡çœ å’Œè§„å¾‹çš„é¥®é£Ÿã€‚æœ‰æ„è¯†åœ°å®‰æ’ä¸€äº›èƒ½ç»™è‡ªå·±å¸¦æ¥æ„‰æ‚¦æ„Ÿçš„æ´»åŠ¨ï¼Œå³ä½¿å½“ä¸‹å¹¶ä¸æƒ³åšã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æŒç»­ä¸€æ®µæ—¶é—´æ„Ÿåˆ°æƒ…ç»ªä½è½ã€ç©ºè™šæˆ–æ‚²ä¼¤ï¼Œå¯¹æœªæ¥æ„Ÿåˆ°æ‚²è§‚ï¼Œç”Ÿæ´»åŠ¨åŠ›æ˜¾è‘—ä¸‹é™ã€‚", advice: "å°†æ‚¨çš„æ„Ÿå—å‘Šè¯‰ä¿¡ä»»çš„äººéå¸¸é‡è¦ã€‚è¿›è¡Œè§„å¾‹çš„æœ‰æ°§è¿åŠ¨ï¼Œå¦‚å¿«èµ°æˆ–è·‘æ­¥ï¼Œå·²è¢«è¯æ˜èƒ½æœ‰æ•ˆæ”¹å–„æŠ‘éƒæƒ…ç»ªã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½æ­£è¢«å¼ºçƒˆçš„æ‚²ä¼¤ã€æ— ä»·å€¼æ„Ÿå’Œç»æœ›æ„Ÿæ‰€ç¬¼ç½©ï¼Œæ—¥å¸¸åŠŸèƒ½ï¼ˆå¦‚å·¥ä½œã€å­¦ä¹ ï¼‰å—åˆ°ä¸¥é‡å½±å“ã€‚", advice: "å¯»æ±‚å¿ƒç†å’¨è¯¢å¸ˆæˆ–æ²»ç–—å¸ˆçš„å¸®åŠ©æ˜¯å½“å‰éå¸¸å¿…è¦çš„é€‰æ‹©ã€‚ä»–ä»¬èƒ½æä¾›ä¸“ä¸šçš„æ”¯æŒå’Œæœ‰æ•ˆçš„å¹²é¢„ç­–ç•¥ã€‚" }
            },
            "ç„¦è™‘": {
                normal: { symptoms: "æ‚¨èƒ½ä»¥å¹³é™å’Œä¸“æ³¨çš„å¿ƒæ€åº”å¯¹ç”Ÿæ´»ä¸­çš„æŒ‘æˆ˜ï¼Œæ²¡æœ‰è¿‡åº¦çš„æ‹…å¿§å’Œç´§å¼ æ„Ÿã€‚", advice: "ç»§ç»­ç»ƒä¹ æ´»åœ¨å½“ä¸‹çš„èƒ½åŠ›ï¼Œæ­£å¿µå’Œå†¥æƒ³æ˜¯ä¿æŒå†…å¿ƒå¹³é™çš„ç»ä½³å·¥å…·ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šæ„Ÿåˆ°ç´§å¼ ã€æ‹…å¿§æˆ–å¿ƒç¥ä¸å®ï¼Œå°¤å…¶æ˜¯åœ¨é¢å¯¹å‹åŠ›äº‹ä»¶æ—¶ï¼Œä½†èƒ½å¤Ÿè‡ªè¡Œè°ƒèŠ‚ã€‚", advice: "å­¦ä¹ ä¸€äº›ç®€å•çš„æ”¾æ¾æŠ€å·§ï¼Œå¦‚è…¹å¼å‘¼å¸æˆ–æ¸è¿›å¼è‚Œè‚‰æ”¾æ¾ï¼Œå¯åœ¨æ„Ÿåˆ°ç„¦è™‘æ—¶å¿«é€Ÿå¸®åŠ©è‡ªå·±å¹³é™ä¸‹æ¥ã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æ—¶å¸¸æ„Ÿåˆ°è«åçš„ç´§å¼ å’Œææƒ§ï¼Œèº«ä½“ä¹Ÿå¯èƒ½å‡ºç°å¿ƒæ…Œã€æ‰‹æŠ–ç­‰ååº”ï¼Œæ‹…å¿§æ„Ÿå¼€å§‹å½±å“æ‚¨çš„æ³¨æ„åŠ›ã€‚", advice: "å°è¯•é™åˆ¶å’–å•¡å› çš„æ‘„å…¥ï¼Œå®ƒå¯èƒ½ä¼šåŠ å‰§ç„¦è™‘æ„Ÿã€‚å»ºç«‹ä¸€ä¸ªè§„å¾‹çš„'æ‹…å¿§æ—¶é—´'ï¼Œæ¯å¤©å›ºå®š15åˆ†é’Ÿå»æ€è€ƒã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½é•¿æœŸå¤„äºé«˜åº¦è­¦è§‰å’Œæ‹…å¿§çš„çŠ¶æ€ï¼Œéš¾ä»¥æ”¾æ¾ï¼Œèº«å¿ƒä¿±ç–²ï¼Œå¹¶å¯èƒ½å¼€å§‹å›é¿å¼•å‘ç„¦è™‘çš„åœºæ™¯ã€‚", advice: "è®¤çŸ¥è¡Œä¸ºç–—æ³•ï¼ˆCBTï¼‰å¯¹äºå¤„ç†ç„¦è™‘ç—‡çŠ¶éå¸¸æœ‰æ•ˆã€‚è¯·å’¨è¯¢ä¸“ä¸šçš„å¿ƒç†æ²»ç–—å¸ˆï¼Œå­¦ä¹ è¯†åˆ«å’ŒæŒ‘æˆ˜å¯¼è‡´ç„¦è™‘çš„éç†æ€§æ€ç»´ã€‚" }
            },
            "æ•Œå¯¹": {
                normal: { symptoms: "æ‚¨èƒ½ä»¥å¹³å’Œç†æ€§çš„æ–¹å¼å¤„ç†äººé™…å†²çªå’Œä¸åŒæ„è§ï¼Œå³ä½¿åœ¨æ„Ÿåˆ°æ„¤æ€’æ—¶ä¹Ÿèƒ½è¿›è¡Œæœ‰æ•ˆçš„æ²Ÿé€šã€‚", advice: "æ‚¨å¥åº·çš„æ„¤æ€’ç®¡ç†èƒ½åŠ›æ˜¯è‰¯å¥½äººé™…å…³ç³»çš„åŸºç¡€ï¼Œè¯·ç»§ç»­ä¿æŒè¿™ç§æˆç†Ÿçš„å¤„ç†æ–¹å¼ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šæ„Ÿåˆ°çƒ¦èºã€æ˜“æ€’ï¼Œæˆ–åœ¨å†…å¿ƒå¯¹ä»–äººçš„è¡Œä¸ºæ„Ÿåˆ°ä¸æ»¡ï¼Œä½†é€šå¸¸èƒ½å¤Ÿæ§åˆ¶è‡ªå·±çš„è¨€è¡Œã€‚", advice: "å½“æ„Ÿåˆ°æ„¤æ€’æ—¶ï¼Œå°è¯•æš‚åœä¸€ä¸‹ï¼Œç»™è‡ªå·±ä¸€ä¸ªå†·é™çš„ç©ºé—´ã€‚ç”¨'æˆ‘'å¼€å¤´æ¥è¡¨è¾¾è‡ªå·±çš„æ„Ÿå—ï¼Œè€Œä¸æ˜¯æŒ‡è´£å¯¹æ–¹ã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æ¯”è¾ƒå®¹æ˜“è¢«æ¿€æ€’ï¼Œæ—¶å¸¸ä¸äººå‘ç”Ÿäº‰è®ºï¼Œå†…å¿ƒç§¯å‹ç€ä¸€äº›æ€¨æ¨å’Œä¸æ»¡çš„æƒ…ç»ªã€‚", advice: "å¯»æ‰¾å¥åº·çš„æ¸ é“æ¥é‡Šæ”¾æ„¤æ€’æƒ…ç»ªï¼Œå¦‚ä½“è‚²è¿åŠ¨ã€å†™ä½œæˆ–è‰ºæœ¯åˆ›ä½œã€‚å­¦ä¹ è¯†åˆ«æ„¤æ€’èƒŒåçš„çœŸå®éœ€æ±‚æ˜¯å…³é”®ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½å†…å¿ƒå……æ»¡æ„¤æ€’å’Œæ•Œæ„ï¼Œå¯¹ä»–äººçš„åŠ¨æœºæŠ±æœ‰æ€€ç–‘å’Œä¸ä¿¡ä»»ï¼Œäººé™…å…³ç³»å› æ­¤å˜å¾—ç´§å¼ å’Œå……æ»¡å†²çªã€‚", advice: "ä¸å¿ƒç†å’¨è¯¢å¸ˆä¸€èµ·æ¢è®¨æ‚¨æ„¤æ€’æ¨¡å¼çš„æ ¹æºï¼Œå¹¶å­¦ä¹ æ›´å…·å»ºè®¾æ€§çš„å†²çªè§£å†³æ–¹æ³•ï¼Œè¿™å¯¹æ”¹å–„æ‚¨çš„äººé™…ç¯å¢ƒè‡³å…³é‡è¦ã€‚" }
            },
            "ææ€–": {
                normal: { symptoms: "æ‚¨èƒ½å¤Ÿå¦ç„¶é¢å¯¹å„ç§ç¤¾äº¤åœºåˆã€ç‰¹å®šç‰©ä½“æˆ–æƒ…å¢ƒï¼Œæ²¡æœ‰éç†æ€§çš„ææƒ§æ„Ÿã€‚", advice: "æ‚¨æ‹¥æœ‰å¥åº·çš„å¿ƒç†é€‚åº”èƒ½åŠ›ï¼Œèƒ½å¤Ÿè‡ªç”±åœ°æ¢ç´¢å’Œä½“éªŒç”Ÿæ´»çš„å„ç§å¯èƒ½æ€§ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¯¹æŸäº›ç‰¹å®šäº‹ç‰©æˆ–æƒ…å¢ƒï¼ˆå¦‚é«˜å¤„ã€äººç¾¤ï¼‰æ„Ÿåˆ°è½»å¾®çš„ç´§å¼ æˆ–ä¸é€‚ï¼Œä½†èƒ½å¤Ÿåº”å¯¹ï¼Œä¸ä¼šåˆ»æ„å›é¿ã€‚", advice: "é€æ­¥ã€æ¸©å’Œåœ°æ¥è§¦è®©æ‚¨æ„Ÿåˆ°è½»å¾®ä¸é€‚çš„äº‹ç‰©ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å»ºç«‹ä¿¡å¿ƒï¼Œé˜²æ­¢ææƒ§æ„ŸåŠ æ·±ã€‚" },
                moderate: { symptoms: "æ‚¨å¯¹æŸäº›ç‰¹å®šæƒ…å¢ƒå­˜åœ¨æ˜æ˜¾çš„ææƒ§æ„Ÿï¼Œå¹¶å¯èƒ½å¼€å§‹æœ‰æ„è¯†åœ°å›é¿å®ƒä»¬ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶äº†æ‚¨çš„æ´»åŠ¨èŒƒå›´ã€‚", advice: "äº†è§£å¹¶å­¦ä¹ ç³»ç»Ÿè„±æ•ç–—æ³•çš„åŸç†ä¼šå¯¹æ‚¨æœ‰å¸®åŠ©ã€‚åœ¨å®‰å…¨å’Œå¯æ§çš„ç¯å¢ƒä¸‹ï¼Œä»æƒ³è±¡å¼€å§‹ï¼Œé€æ­¥æ¥è¿‘ææƒ§å¯¹è±¡ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½è¢«ä¸€ç§æˆ–å¤šç§å¼ºçƒˆçš„ã€éç†æ€§çš„ææƒ§æ‰€å›°æ‰°ï¼Œå¹¶ä¸ºæ­¤ä»˜å‡ºäº†å·¨å¤§çš„å›é¿åŠªåŠ›ï¼Œä¸¥é‡å½±å“äº†æ‚¨çš„æ­£å¸¸ç”Ÿæ´»ã€‚", advice: "ä¸“ä¸šçš„å¿ƒç†æ²»ç–—ï¼Œç‰¹åˆ«æ˜¯æš´éœ²ç–—æ³•ï¼Œæ˜¯å¤„ç†ææ€–ç—‡çŠ¶æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚è¯·ä¸è¦ç‹¬è‡ªæŒ£æ‰ï¼Œå¯»æ±‚å’¨è¯¢å¸ˆçš„å¸®åŠ©ã€‚" }
            },
            "åæ‰§": {
                normal: { symptoms: "æ‚¨èƒ½å¤Ÿä¿¡ä»»ä»–äººï¼Œå®¢è§‚åœ°çœ‹å¾…é—®é¢˜ï¼Œä¸ä¼šæ— ç«¯æ€€ç–‘ä»–äººçš„åŠ¨æœºï¼Œäººé™…å…³ç³»è½»æ¾å’Œè°ã€‚", advice: "å¥åº·çš„ä¿¡ä»»èƒ½åŠ›æ˜¯å»ºç«‹æ·±åº¦äººé™…å…³ç³»çš„åŸºç¡€ï¼Œè¿™æ˜¯æ‚¨éå¸¸å®è´µçš„å¿ƒç†è´¢å¯Œã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šå¯¹ä»–äººçš„æ„å›¾äº§ç”Ÿæ€€ç–‘ï¼Œæˆ–æ„Ÿè§‰è‡ªå·±è¢«ä¸å…¬å¹³å¯¹å¾…ï¼Œä½†èƒ½å¤Ÿé€šè¿‡æ²Ÿé€šå’Œäº‹å®æ¥æ¶ˆé™¤ç–‘è™‘ã€‚", advice: "åœ¨äº§ç”Ÿæ€€ç–‘æ—¶ï¼Œä¸»åŠ¨ã€å¼€æ”¾åœ°ä¸å¯¹æ–¹æ²Ÿé€šï¼Œæ¾„æ¸…äº‹å®ï¼Œæ˜¯é¿å…è¯¯è§£å‡çº§çš„æœ€ä½³æ–¹å¼ã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æ—¶å¸¸æ„Ÿåˆ°ä¸è¢«ä¿¡ä»»æˆ–è¢«ä»–äººé’ˆå¯¹ï¼Œå†…å¿ƒæœ‰ä¸€å®šçš„æˆ’å¤‡å’Œç–ç¦»æ„Ÿï¼Œéš¾ä»¥çœŸæ­£åœ°å¯¹äººæ•å¼€å¿ƒæ‰‰ã€‚", advice: "å°è¯•ç»ƒä¹ 'å–„æ„è§£è¯»'ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®è¯æ®å‰ï¼Œå…ˆå‡è®¾å¯¹æ–¹æ˜¯å‡ºäºå¥½æ„ã€‚è¿™æœ‰åŠ©äºæ‰“ç ´æ€€ç–‘çš„å¾ªç¯ã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½åšä¿¡è‡ªå·±æ˜¯ä»–äººæ•Œæ„æˆ–é˜´è°‹çš„å¯¹è±¡ï¼Œå†…å¿ƒå……æ»¡æ€€ç–‘ã€è­¦æƒ•å’Œä¸å®‰å…¨æ„Ÿï¼Œéš¾ä»¥ç»´æŒç¨³å®šçš„äººé™…å…³ç³»ã€‚", advice: "ä¸å¿ƒç†å’¨è¯¢å¸ˆä¸€èµ·å·¥ä½œï¼Œæ¢è®¨è¿™äº›ä¸ä¿¡ä»»æ„Ÿçš„æ¥æºï¼Œå¹¶å­¦ä¹ å¦‚ä½•åŸºäºè¯æ®è€Œéæ„Ÿè§‰æ¥åˆ¤æ–­ç°å®ï¼Œæ˜¯æå…¶é‡è¦çš„ä¸€æ­¥ã€‚" }
            },
            "ç²¾ç¥ç—…æ€§": {
                normal: { symptoms: "æ‚¨çš„æ€æƒ³æ¸…æ™°ï¼Œæ„ŸçŸ¥çœŸå®ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°èå…¥ç°å®ç”Ÿæ´»ï¼Œä¸ä»–äººæœ‰å…±åŒçš„ç°å®æ„Ÿã€‚", advice: "æ‚¨æ‹¥æœ‰ç¨³å›ºçš„ç°å®æ£€éªŒèƒ½åŠ›ï¼Œè¿™æ˜¯å¿ƒç†å¥åº·çš„é‡è¦åŸºçŸ³ã€‚" },
                mild: { symptoms: "æ‚¨å¯èƒ½å¶å°”ä¼šæœ‰ä¸€äº›å¥‡ç‰¹çš„æƒ³æ³•æˆ–æ„Ÿè§‰ï¼Œä½†æ‚¨æ¸…æ¥šåœ°çŸ¥é“é‚£åªæ˜¯è‡ªå·±çš„æƒ³è±¡ï¼Œä¸ä¼šå°†å…¶ä¸ç°å®æ··æ·†ã€‚", advice: "ä¿æŒå¼€æ”¾çš„å¥½å¥‡å¿ƒï¼ŒåŒæ—¶æ‰æ ¹äºç°å®ç”Ÿæ´»ï¼Œå¤šä¸äººäº¤æµï¼Œå‚ä¸å…·ä½“çš„æ´»åŠ¨ï¼Œæœ‰åŠ©äºä¿æŒæ€ç»´çš„æ¸…æ™°åº¦ã€‚" },
                moderate: { symptoms: "æ‚¨å¯èƒ½æœ‰æ—¶ä¼šæ„Ÿåˆ°æ€ç»´æ··ä¹±ï¼Œæˆ–æœ‰ä¸€äº›è„±ç¦»ç°å®çš„æƒ³æ³•ï¼Œè®©æ‚¨æ„Ÿåˆ°å›°æƒ‘å’Œä¸å®‰ï¼Œç¤¾äº¤ä¸Šä¹Ÿå¯èƒ½æ„Ÿåˆ°å­¤ç«‹ã€‚", advice: "ä¿è¯å……è¶³çš„ç¡çœ å’Œä¼‘æ¯ï¼Œé¿å…ä½¿ç”¨é…’ç²¾å’Œè¯ç‰©ï¼Œè¿™äº›å¯¹äºç»´æŒæ€ç»´çš„ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚ä¸ä¿¡ä»»çš„äººåˆ†äº«æ‚¨çš„å›°æƒ‘æ„Ÿã€‚" },
                severe: { symptoms: "æ‚¨å¯èƒ½å¼€å§‹éš¾ä»¥åŒºåˆ†å†…å¿ƒæƒ³æ³•å’Œå¤–éƒ¨ç°å®ï¼Œå‡ºç°ä¸€äº›æ­ªæ›²çš„ä¿¡å¿µæˆ–æ„ŸçŸ¥ä½“éªŒï¼Œè®©æ‚¨å’Œèº«è¾¹çš„äººéƒ½æ„Ÿåˆ°æ‹…å¿§ã€‚", advice: "è¯·å°½å¿«å¯»æ±‚ç²¾ç¥ç§‘åŒ»ç”Ÿçš„ä¸“ä¸šè¯„ä¼°ã€‚åŠæ—©çš„å¹²é¢„å¯¹äºæ§åˆ¶ç—‡çŠ¶ã€é˜²æ­¢å…¶è¿›ä¸€æ­¥å‘å±•è‡³å…³é‡è¦ã€‚" }
            }
        };
        
        // é—®é¢˜åˆ—è¡¨
        const questions = [
            {id:1,text:"1. å¤´ç—›"},
            {id:2,text:"2. ç¥ç»è¿‡æ•ï¼Œå¿ƒé‡Œä¸è¸å®"},
            {id:3,text:"3. å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹"},
            {id:4,text:"4. å¤´æ™•æˆ–æ˜å€’"},
            {id:5,text:"5. å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€"},
            {id:6,text:"6. å¯¹æ—äººè´£å¤‡æ±‚å…¨"},
            {id:7,text:"7. æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³"},
            {id:8,text:"8. è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦"},
            {id:9,text:"9. å¿˜æ€§å¤§"},
            {id:10,text:"10. æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„å®Œç¾"},
            {id:11,text:"11. å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨"},
            {id:12,text:"12. èƒ¸ç—›"},
            {id:13,text:"13. å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“"},
            {id:14,text:"14. æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢"},
            {id:15,text:"15. æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½"},
            {id:16,text:"16. å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³"},
            {id:17,text:"17. å‘æŠ–"},
            {id:18,text:"18. æ„Ÿåˆ°å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡ä»»"},
            {id:19,text:"19. èƒƒå£ä¸å¥½"},
            {id:20,text:"20. å®¹æ˜“å“­æ³£"},
            {id:21,text:"21. åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨"},
            {id:22,text:"22. æ„Ÿåˆ°å—éª—ã€ä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“ä½æ‚¨"},
            {id:23,text:"23. æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•"},
            {id:24,text:"24. è‡ªå·±ä¸èƒ½æ§åˆ¶åœ°å¤§å‘è„¾æ°”"},
            {id:25,text:"25. æ€•å•ç‹¬å‡ºé—¨"},
            {id:26,text:"26. ç»å¸¸è´£å¤‡è‡ªå·±"},
            {id:27,text:"27. è…°ç—›"},
            {id:28,text:"28. æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡"},
            {id:29,text:"29. æ„Ÿåˆ°å­¤ç‹¬"},
            {id:30,text:"30. æ„Ÿåˆ°è‹¦é—·"},
            {id:31,text:"31. è¿‡åˆ†æ‹…å¿§"},
            {id:32,text:"32. å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£"},
            {id:33,text:"33. æ„Ÿåˆ°å®³æ€•"},
            {id:34,text:"34. æˆ‘çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³"},
            {id:35,text:"35. æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•"},
            {id:36,text:"36. æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€ä¸åŒæƒ…æ‚¨"},
            {id:37,text:"37. æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨"},
            {id:38,text:"38. åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®"},
            {id:39,text:"39. å¿ƒè·³å¾—å¾ˆå‰å®³"},
            {id:40,text:"40. æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœ"},
            {id:41,text:"41. æ„Ÿåˆ°æ¯”ä¸ä¸Šä»–äºº"},
            {id:42,text:"42. è‚Œè‚‰é…¸ç—›"},
            {id:43,text:"43. æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨"},
            {id:44,text:"44. éš¾ä»¥å…¥ç¡"},
            {id:45,text:"45. åšäº‹å¿…é¡»åå¤æ£€æŸ¥"},
            {id:46,text:"46. éš¾ä»¥åšå‡ºå†³å®š"},
            {id:47,text:"47. æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦"},
            {id:48,text:"48. å‘¼å¸æœ‰å›°éš¾"},
            {id:49,text:"49. ä¸€é˜µé˜µå‘å†·æˆ–å‘çƒ­"},
            {id:50,text:"50. å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨"},
            {id:51,text:"51. è„‘å­å˜ç©ºäº†"},
            {id:52,text:"52. èº«ä½“å‘éº»æˆ–åˆºç—›"},
            {id:53,text:"53. å–‰å’™æœ‰æ¢—å¡æ„Ÿ"},
            {id:54,text:"54. æ„Ÿåˆ°å‰é€”æ²¡æœ‰å¸Œæœ›"},
            {id:55,text:"55. ä¸èƒ½é›†ä¸­æ³¨æ„åŠ›"},
            {id:56,text:"56. æ„Ÿåˆ°èº«ä½“çš„æŸä¸€éƒ¨åˆ†æ— åŠ›"},
            {id:57,text:"57. æ„Ÿåˆ°ç´§å¼ ã€è¢«ç‰µæ‰¯ç€"},
            {id:58,text:"58. æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡"},
            {id:59,text:"59. æƒ³åˆ°æ­»äº¡çš„äº‹"},
            {id:60,text:"60. åƒå¾—å¤ªå¤š"},
            {id:61,text:"61. å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨"},
            {id:62,text:"62. æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•"},
            {id:63,text:"63. æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³æŸäººçš„å†²åŠ¨"},
            {id:64,text:"64. é†’å¾—å¤ªæ—©"},
            {id:65,text:"65. å¿…é¡»é‡å¤åŒæ ·çš„åŠ¨ä½œï¼Œå¦‚è§¦æ‘¸ã€ç‚¹æ•°ã€æ´—æ‰‹"},
            {id:66,text:"66. ç¡å¾—ä¸ç¨³ä¸æ·±"},
            {id:67,text:"67. æœ‰æƒ³æ‘”åæˆ–æ‰“ç¢ä¸œè¥¿çš„å†²åŠ¨"},
            {id:68,text:"68. æœ‰ä¸€äº›åˆ«äººæ²¡æœ‰çš„å¤æ€ªæƒ³æ³•"},
            {id:69,text:"69. æ€»æ„Ÿåˆ°æœ‰äººåœ¨ç›¯ç€æ‚¨"},
            {id:70,text:"70. å®³æ€•å‘†åœ¨äººç¾¤ä¸­ï¼Œå¦‚å•†åº—ã€ç”µå½±é™¢"},
            {id:71,text:"71. æ„Ÿåˆ°åšä»€ä¹ˆäº‹éƒ½å¾ˆå›°éš¾"},
            {id:72,text:"72. é˜µé˜µææƒ§æˆ–æƒŠæ"},
            {id:73,text:"73. æ„Ÿåˆ°åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿å¾ˆä¸èˆ’æœ"},
            {id:74,text:"74. ç»å¸¸ä¸äººäº‰è®º"},
            {id:75,text:"75. å•ç‹¬ä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ "},
            {id:76,text:"76. åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰åšå‡ºæ°å½“çš„è¯„ä»·"},
            {id:77,text:"77. å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•"},
            {id:78,text:"78. æ„Ÿåˆ°åç«‹ä¸å®‰å¿ƒç¥ä¸å®š"},
            {id:79,text:"79. æ„Ÿåˆ°è‡ªå·±æ²¡æœ‰ä»€ä¹ˆä»·å€¼"},
            {id:80,text:"80. æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸åƒæ˜¯çœŸçš„"},
            {id:81,text:"81. å¤§å«æˆ–æ‘”ä¸œè¥¿"},
            {id:82,text:"82. å®³æ€•åœ¨å…¬å…±åœºåˆæ˜å€’"},
            {id:83,text:"83. æ„Ÿåˆ°åˆ«äººæƒ³å æ‚¨çš„ä¾¿å®œ"},
            {id:84,text:"84. ä¸ºä¸€äº›æœ‰å…³'æ€§'çš„æƒ³æ³•è€Œè‹¦æ¼"},
            {id:85,text:"85. æ‚¨è®¤ä¸ºåº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½š"},
            {id:86,text:"86. æ„Ÿåˆ°è¦å¾ˆå¿«èµ¶åˆ°æŸä¸ªåœ°æ–¹"},
            {id:87,text:"87. æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜"},
            {id:88,text:"88. ä»æœªæ„Ÿåˆ°å’Œå…¶ä»–äººå¾ˆäº²è¿‘"},
            {id:89,text:"89. æ„Ÿåˆ°è´Ÿç½ª"},
            {id:90,text:"90. æ„Ÿåˆ°è‡ªå·±çš„è„‘å­æœ‰æ¯›ç—…"}
        ];
        
        const options = [
            {text: "ä»æ— ", score: 1},
            {text: "è½»åº¦", score: 2},
            {text: "ä¸­åº¦", score: 3},
            {text: "åé‡", score: 4},
            {text: "ä¸¥é‡", score: 5}
        ];
        
        // ==================== å…¨å±€å˜é‡ ====================
        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let userCode = null;
        let deviceId = null;
        
        // ==================== è®¾å¤‡IDå’Œå…‘æ¢ç ç®¡ç† ====================
        
        // ç”Ÿæˆè®¾å¤‡IDï¼ˆåŸºäºæµè§ˆå™¨æŒ‡çº¹ï¼‰
        function generateDeviceId() {
            try {
                const navigatorInfo = {
                    userAgent: navigator.userAgent,
                    language: navigator.language,
                    platform: navigator.platform,
                    hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
                    screenWidth: window.screen.width,
                    screenHeight: window.screen.height,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                };
                
                const infoString = JSON.stringify(navigatorInfo);
                let hash = 0;
                for (let i = 0; i < infoString.length; i++) {
                    const char = infoString.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return APP_NAME + '_' + Math.abs(hash).toString(36).substring(0, 8);
            } catch (e) {
                // å¦‚æœç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨éšæœºID
                return APP_NAME + '_' + Math.random().toString(36).substring(2, 10);
            }
        }
        
        // ç”Ÿæˆå…‘æ¢ç 
        function generateVerificationCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // å»æ‰å®¹æ˜“æ··æ·†çš„å­—ç¬¦
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }
        
        // åˆå§‹åŒ–å…‘æ¢ç 
        function initCode() {
            deviceId = generateDeviceId();
            
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰æœ‰æ•ˆçš„å…‘æ¢ç 
            const savedCode = localStorage.getItem(`${APP_NAME}_code`);
            const savedTime = localStorage.getItem(`${APP_NAME}_code_time`);
            const savedDevice = localStorage.getItem(`${APP_NAME}_device`);
            
            const now = Date.now();
            const oneDay = 24 * 60 * 60 * 1000;
            
            if (savedCode && savedTime && savedDevice === deviceId) {
                const codeTime = parseInt(savedTime, 10);
                if (now - codeTime < oneDay) {
                    // æœ‰æœªè¿‡æœŸçš„å…‘æ¢ç 
                    userCode = savedCode;
                    showExistingCode();
                    return;
                }
            }
            
            // ç”Ÿæˆæ–°çš„å…‘æ¢ç 
            setTimeout(() => {
                userCode = generateVerificationCode();
                
                // ä¿å­˜åˆ°localStorage
                localStorage.setItem(`${APP_NAME}_code`, userCode);
                localStorage.setItem(`${APP_NAME}_code_time`, now.toString());
                localStorage.setItem(`${APP_NAME}_device`, deviceId);
                
                // æ˜¾ç¤ºå…‘æ¢ç 
                showGeneratedCode();
            }, 2000); // å»¶è¿Ÿ2ç§’æ˜¾ç¤ºï¼Œè®©ç”¨æˆ·æœ‰ç”Ÿæˆçš„æ„Ÿè§‰
        }
        
        // æ˜¾ç¤ºç”Ÿæˆçš„å…‘æ¢ç 
        function showGeneratedCode() {
            const codeDisplay = document.querySelector('.code-display');
            const loading = document.querySelector('.loading');
            const startBtn = document.getElementById('startTestBtn');
            
            if (loading) loading.style.display = 'none';
            if (codeDisplay) {
                document.getElementById('generatedCode').textContent = userCode;
                codeDisplay.style.display = 'block';
            }
            if (startBtn) startBtn.style.display = 'block';
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            if (codeDisplay) {
                codeDisplay.style.animation = 'none';
                setTimeout(() => {
                    codeDisplay.style.animation = 'fadeIn 0.5s ease-out';
                }, 10);
            }
        }
        
        // æ˜¾ç¤ºå·²å­˜åœ¨çš„å…‘æ¢ç 
        function showExistingCode() {
            const existingSection = document.getElementById('existingCodeSection');
            const existingCodeElem = document.getElementById('existingCode');
            const loading = document.querySelector('.loading');
            
            if (loading) loading.style.display = 'none';
            if (existingSection && existingCodeElem) {
                existingCodeElem.textContent = userCode;
                existingSection.style.display = 'block';
            }
            
            // è®¡ç®—å‰©ä½™æ—¶é—´
            const savedTime = parseInt(localStorage.getItem(`${APP_NAME}_code_time`), 10);
            const now = Date.now();
            const remainingTime = 24 * 60 * 60 * 1000 - (now - savedTime);
            const remainingHours = Math.floor(remainingTime / (60 * 60 * 1000));
            
            if (remainingHours > 0) {
                const info = document.createElement('div');
                info.style.cssText = 'font-size: 13px; color: var(--primary-green); margin-top: 8px;';
                info.textContent = `å‰©ä½™æœ‰æ•ˆæ—¶é—´: ${remainingHours}å°æ—¶`;
                existingCodeElem.parentNode.appendChild(info);
            }
        }
        
        // ä½¿ç”¨å·²å­˜åœ¨çš„å…‘æ¢ç 
        function useExistingCode() {
            startTest();
        }
        
        // å¤åˆ¶å…‘æ¢ç åˆ°å‰ªè´´æ¿
        function copyCodeToClipboard() {
            if (!userCode) return;
            
            navigator.clipboard.writeText(userCode)
                .then(() => {
                    const btn = document.querySelector('.copy-btn');
                    const originalText = btn.textContent;
                    btn.textContent = 'âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
                    btn.style.background = 'linear-gradient(45deg, #4CAF50, #66BB6A)';
                    
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.background = 'linear-gradient(45deg, #2db795, #34d0a5)';
                    }, 2000);
                })
                .catch(err => {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                    // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨textarea
                    const textArea = document.createElement('textarea');
                    textArea.value = userCode;
                    document.body.appendChild(textArea);
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        alert('å…‘æ¢ç å·²å¤åˆ¶: ' + userCode);
                    } catch (e) {
                        alert('è¯·æ‰‹åŠ¨å¤åˆ¶å…‘æ¢ç : ' + userCode);
                    }
                    document.body.removeChild(textArea);
                });
        }
        
        // ==================== æµ‹è¯•æµç¨‹ ====================
        
        function startTest() {
            document.getElementById('initScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            renderCurrentQuestion();
        }
        
        function renderCurrentQuestion() {
            const question = questions[currentQuestionIndex];
            
            let html = `
                <div class="card">
                    <div id="progress-container">
                        <div id="progress-bar"></div>
                    </div>
                    <div id="progress-text">${currentQuestionIndex + 1} / ${questions.length}</div>
                    
                    <div class="question-content">
                        <p class="question-text">${question.text}</p>
                        <div class="options-group" id="options-for-q${question.id}">
            `;
            
            options.forEach(option => {
                const optionId = `q${question.id}_${option.score}`;
                const checked = userAnswers[currentQuestionIndex] === option.score ? "checked" : "";
                
                html += `
                    <input type="radio" id="${optionId}" name="q${question.id}" value="${option.score}" ${checked}>
                    <label for="${optionId}">${option.text}</label>
                `;
            });
            
            html += `
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()">
                            â† ä¸Šä¸€é¢˜
                        </button>
                        <button class="btn" id="nextBtn" onclick="nextQuestion()">
                            ${currentQuestionIndex === questions.length - 1 ? 'å®Œæˆæµ‹è¯•' : 'ä¸‹ä¸€é¢˜ â†’'}
                        </button>
                    </div>
                    
                    <div class="error-message" id="questionError"></div>
                </div>
            `;
            
            document.getElementById('testScreen').innerHTML = html;
            
            // æ·»åŠ é€‰é¡¹é€‰æ‹©ç›‘å¬
            const optionsGroup = document.getElementById(`options-for-q${question.id}`);
            if (optionsGroup) {
                optionsGroup.addEventListener('change', (event) => {
                    userAnswers[currentQuestionIndex] = parseInt(event.target.value, 10);
                    document.getElementById('questionError').textContent = '';
                });
            }
            
            updateProgress();
            updateNavButtons();
        }
        
        function updateProgress() {
            const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) {
                progressBar.style.width = `${progressPercent}%`;
            }
        }
        
        function updateNavButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (prevBtn) {
                prevBtn.style.visibility = currentQuestionIndex === 0 ? 'hidden' : 'visible';
            }
            
            if (nextBtn) {
                nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? 'å®Œæˆæµ‹è¯•' : 'ä¸‹ä¸€é¢˜ â†’';
            }
        }
        
        function nextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                document.getElementById('questionError').textContent = 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé€‰é¡¹';
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderCurrentQuestion();
            } else {
                handleSubmit();
            }
        }
        
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderCurrentQuestion();
            }
        }
        
        function handleSubmit() {
            document.getElementById('testScreen').style.display = 'none';
            
            document.getElementById('resultScreen').innerHTML = `
                <div class="card loading">
                    <h2>æ­£åœ¨ä¸ºæ‚¨åˆ†æç»“æœ...</h2>
                    <div class="spinner"></div>
                    <p style="margin-top: 20px; color: var(--text-secondary);">
                        æ­£åœ¨è®¡ç®—æ‚¨çš„å¿ƒç†å¥åº·æŒ‡æ•°ï¼Œè¯·ç¨å€™...
                    </p>
                </div>
            `;
            
            document.getElementById('resultScreen').style.display = 'block';
            
            // å»¶è¿Ÿæ˜¾ç¤ºç»“æœï¼Œå¢åŠ åˆ†æçš„æ„Ÿè§‰
            setTimeout(() => {
                const result = analyzeResults();
                displayResult(result);
            }, 1500);
        }
        
        // ==================== ç»“æœåˆ†æ ====================
        
        function analyzeResults() {
            // è®¡ç®—æ€»åˆ†å’Œå¹³å‡åˆ†
            const totalScore = userAnswers.reduce((sum, score) => sum + (score || 0), 0);
            const itemAverageScore = (totalScore / 90).toFixed(2);
            
            // è®¡ç®—é˜³æ€§é¡¹ç›®æ•°ï¼ˆå¾—åˆ†â‰¥2ï¼‰
            const positiveItemCount = userAnswers.filter(score => score >= 2).length;
            const positiveFactorPercentage = ((positiveItemCount / 90) * 100).toFixed(0) + '%';
            
            // è®¡ç®—å„å› å­å¾—åˆ†
            const factorDetails = Object.entries(SCL90_FACTORS).map(([name, ids]) => {
                const factorTotalScore = ids.reduce((sum, id) => {
                    const answerIndex = id - 1; // é—®é¢˜IDä»1å¼€å§‹ï¼Œæ•°ç»„ç´¢å¼•ä»0å¼€å§‹
                    return sum + (userAnswers[answerIndex] || 0);
                }, 0);
                
                const factorAverageScore = factorTotalScore / ids.length;
                
                // ç¡®å®šå› å­çŠ¶æ€
                let status;
                if (factorAverageScore < 2) {
                    status = { level: "normal", text: "æ­£å¸¸", color: "#28a745" };
                } else if (factorAverageScore < 3) {
                    status = { level: "mild", text: "è½»åº¦", color: "#ffc107" };
                } else if (factorAverageScore < 4) {
                    status = { level: "moderate", text: "ä¸­åº¦", color: "#fd7e14" };
                } else {
                    status = { level: "severe", text: "é‡åº¦", color: "#dc3545" };
                }
                
                return {
                    name,
                    totalScore: factorTotalScore,
                    averageScore: factorAverageScore,
                    status
                };
            });
            
            // è®¡ç®—ç»¼åˆçŠ¶æ€
            const overallAssessment = getOverallStatus(totalScore, positiveItemCount, factorDetails);
            
            // è·å–è¯¦ç»†è§£é‡Š
            const detailedExplanations = factorDetails.map(factor => {
                const knowledge = KNOWLEDGE_BASE_V2[factor.name][factor.status.level];
                return {
                    name: factor.name,
                    status: factor.status,
                    symptoms: knowledge.symptoms,
                    advice: knowledge.advice
                };
            });
            
            return {
                stats: {
                    totalScore,
                    itemAverageScore: parseFloat(itemAverageScore),
                    positiveFactorCount: positiveItemCount,
                    positiveFactorPercentage
                },
                overallAssessment,
                factorDetails,
                detailedExplanations
            };
        }
        
        function getOverallStatus(totalScore, positiveItemCount, factorDetails) {
            const allFactorsNormal = factorDetails.every(f => f.averageScore < 2);
            
            if (totalScore < 160 && positiveItemCount <= 43 && allFactorsNormal) {
                return { text: "æ­£å¸¸", color: "#28a745" };
            }
            
            const hasSevereFactors = factorDetails.some(f => f.averageScore >= 4);
            if ((totalScore >= 300 || hasSevereFactors) && positiveItemCount > 80) {
                return { text: "é‡åº¦", color: "#dc3545" };
            }
            
            const hasModerateFactors = factorDetails.some(f => f.averageScore >= 3 && f.averageScore < 4);
            if (((totalScore >= 200 && totalScore <= 299) || hasModerateFactors) && 
                (positiveItemCount >= 60 && positiveItemCount <= 80)) {
                return { text: "ä¸­åº¦", color: "#fd7e14" };
            }
            
            if (totalScore >= 160 || positiveItemCount > 43) {
                return { text: "è½»åº¦", color: "#ffc107" };
            }
            
            return { text: "æ­£å¸¸", color: "#28a745" };
        }
        
        // ==================== ç»“æœæ˜¾ç¤º ====================
        
        function displayResult(result) {
            const { stats, overallAssessment, factorDetails, detailedExplanations } = result;
            
            // æ„å»ºç»Ÿè®¡ç½‘æ ¼
            const statsHTML = `
                <div class="stats-grid">
                    <div class="stat-box">
                        <h4>SCL-90 æ€»åˆ†</h4>
                        <p class="stat-total">${stats.totalScore}</p>
                    </div>
                    <div class="stat-box">
                        <h4>å•é¡¹å¹³å‡åˆ†</h4>
                        <p class="stat-average">${stats.itemAverageScore.toFixed(2)}</p>
                    </div>
                    <div class="stat-box">
                        <h4>é˜³æ€§é¡¹ç›®æ•°</h4>
                        <p class="stat-positive">${stats.positiveFactorCount}</p>
                    </div>
                    <div class="stat-box">
                        <h4>é˜³æ€§é¡¹ç›®å æ¯”</h4>
                        <p class="stat-percentage">${stats.positiveFactorPercentage}</p>
                    </div>
                </div>
            `;
            
            // æ€»ä½“çŠ¶æ€
            const overallHTML = `
                <div class="overall-status">
                    <h3>æ‚¨çš„å¿ƒç†å¥åº·çŠ¶æ€</h3>
                    <div class="status-badge" style="background-color: ${overallAssessment.color}; color: white;">
                        ${overallAssessment.text}
                    </div>
                    <p style="margin-top: 15px; color: var(--text-secondary);">
                        æœ¬æ¬¡æµ‹è¯„æ»¡åˆ†ä¸º450åˆ†(90é¢˜ Ã— 5åˆ†)ã€‚é€šå¸¸è®¤ä¸ºï¼Œå› å­å‡åˆ†å¤§äº 2.0 éœ€å¼•èµ·å…³æ³¨ã€‚
                    </p>
                </div>
            `;
            
            // å› å­è¡¨æ ¼
            let factorTableHTML = `
                <table class="factor-table">
                    <thead>
                        <tr>
                            <th>å› å­åç§°</th>
                            <th>æ€»åˆ†</th>
                            <th>å‡åˆ†</th>
                            <th>è¯„ä¼°</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            factorDetails.forEach(factor => {
                factorTableHTML += `
                    <tr>
                        <td><strong>${factor.name}</strong></td>
                        <td>${factor.totalScore.toFixed(0)}</td>
                        <td>${factor.averageScore.toFixed(2)}</td>
                        <td style="color: ${factor.status.color}; font-weight: bold;">
                            ${factor.status.text}
                        </td>
                    </tr>
                `;
            });
            
            factorTableHTML += `</tbody></table>`;
            
            // é›·è¾¾å›¾å®¹å™¨
            const radarHTML = `
                <div id="radar-chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            `;
            
            // è¯¦ç»†è§£é‡Š
            let explanationsHTML = '';
            detailedExplanations.forEach(exp => {
                explanationsHTML += `
                    <div class="explanation-card">
                        <h4 style="color: ${exp.status.color}; margin-top: 0;">
                            ${exp.name}è¯„ä¼°ï¼š${exp.status.text}
                        </h4>
                        <p><strong>ç‰¹ç‚¹è¡¨ç°ï¼š</strong>${exp.symptoms}</p>
                        <div class="explanation-advice">
                            <p><strong>æ¸©æš–å»ºè®®ï¼š</strong>${exp.advice}</p>
                        </div>
                    </div>
                `;
            });
            
            // è¯„åˆ†æ ‡å‡†
            const gradingHTML = `
                <div class="grading-standard">
                    <div class="grade-item" style="background-color: #28a745;">
                        æ­£å¸¸<br>(å‡åˆ† &lt; 2.0)
                    </div>
                    <div class="grade-item" style="background-color: #ffc107;">
                        è½»åº¦<br>(2.0 - 2.9)
                    </div>
                    <div class="grade-item" style="background-color: #fd7e14;">
                        ä¸­åº¦<br>(3.0 - 3.9)
                    </div>
                    <div class="grade-item" style="background-color: #dc3545;">
                        é‡åº¦<br>(å‡åˆ† â‰¥ 4.0)
                    </div>
                </div>
            `;
            
            // ç»„è£…å®Œæ•´ç»“æœé¡µé¢
            const resultHTML = `
                <div class="card">
                    <h2>SCL-90 å¿ƒç†å¥åº·æµ‹è¯„æŠ¥å‘Š</h2>
                    ${statsHTML}
                    ${overallHTML}
                </div>
                
                <div class="card">
                    <h3>å„å› å­è¯„ä¼°è¯¦æƒ…</h3>
                    ${factorTableHTML}
                </div>
                
                <div class="card">
                    <h3>å› å­å‘å±•ç¨‹åº¦é›·è¾¾å›¾</h3>
                    ${radarHTML}
                </div>
                
                <div class="card">
                    <h3>å› å­è¯¦è§£ä¸å»ºè®®</h3>
                    ${explanationsHTML}
                </div>
                
                <div class="card">
                    <h3>è¯„åˆ†åˆ†çº§æ ‡å‡†</h3>
                    ${gradingHTML}
                    <p style="text-align: center; margin-top: 20px; color: var(--text-secondary);">
                        æ³¨ï¼šä»¥ä¸Šç»“æœä¸ºåŸºäºSCL-90é‡è¡¨çš„åˆæ­¥è¯„ä¼°ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šè¯Šæ–­ã€‚<br>
                        å¦‚æœ‰éœ€è¦ï¼Œè¯·å’¨è¯¢å¿ƒç†å¥åº·ä¸“ä¸šäººå£«ã€‚
                    </p>
                </div>
                
                <div class="card" style="text-align: center;">
                    <h3>å®Œæˆæµ‹è¯„</h3>
                    <p>æ‚¨çš„æµ‹è¯„ç»“æœå·²ä¿å­˜ã€‚ä½¿ç”¨åŒä¸€è®¾å¤‡åœ¨24å°æ—¶å†…å¯é‡å¤æµ‹è¯•ã€‚</p>
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                        <button class="btn btn-small" onclick="retakeTest()">
                            ğŸ”„ é‡æ–°æµ‹è¯•
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="shareResults()">
                            ğŸ“¤ åˆ†äº«ç»“æœ
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="saveResults()">
                            ğŸ’¾ ä¿å­˜æŠ¥å‘Š
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('resultScreen').innerHTML = resultHTML;
            
            // ç»˜åˆ¶é›·è¾¾å›¾
            setTimeout(() => {
                drawRadarChart(factorDetails);
            }, 100);
        }
        
        function drawRadarChart(factorDetails) {
            const canvas = document.getElementById('radarChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // å‡†å¤‡æ•°æ®
            const labels = factorDetails.map(f => f.name);
            const data = factorDetails.map(f => f.averageScore);
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'å› å­å‡åˆ†',
                        data: data,
                        backgroundColor: 'rgba(45, 183, 149, 0.2)',
                        borderColor: 'rgba(45, 183, 149, 1)',
                        pointBackgroundColor: 'rgba(45, 183, 149, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(45, 183, 149, 1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(0, 0, 0, 0.08)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.08)'
                            },
                            pointLabels: {
                                font: {
                                    size: 12
                                },
                                color: getComputedStyle(document.body).getPropertyValue('--text-color')
                            },
                            min: 0,
                            max: 5,
                            ticks: {
                                display: false,
                                stepSize: 1
                            },
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw.toFixed(2)}åˆ†`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ==================== ç»“æœæ“ä½œ ====================
        
        function retakeTest() {
            // é‡ç½®æµ‹è¯•çŠ¶æ€
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            
            // è·³è½¬åˆ°æµ‹è¯•ç•Œé¢
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            renderCurrentQuestion();
        }
        
        function shareResults() {
            // ç®€å•çš„åˆ†äº«åŠŸèƒ½
            const text = `æˆ‘åˆšå®Œæˆäº†SCL-90å¿ƒç†å¥åº·æµ‹è¯„ï¼Œè·å¾—äº†ä¸“ä¸šçš„å¿ƒç†çŠ¶æ€è¯„ä¼°ã€‚`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„SCL-90å¿ƒç†å¥åº·æµ‹è¯„æŠ¥å‘Š',
                    text: text,
                    url: window.location.href
                }).catch(err => {
                    console.log('åˆ†äº«å–æ¶ˆ:', err);
                });
            } else {
                // é™çº§æ–¹æ¡ˆ
                navigator.clipboard.writeText(text + ' ' + window.location.href)
                    .then(() => {
                        alert('åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                    })
                    .catch(err => {
                        prompt('è¯·å¤åˆ¶ä»¥ä¸‹é“¾æ¥åˆ†äº«:', window.location.href);
                    });
            }
        }
        
        function saveResults() {
            // å°†ç»“æœä¿å­˜ä¸ºPDFï¼ˆç®€åŒ–ç‰ˆï¼‰
            const resultText = `
SCL-90 å¿ƒç†å¥åº·æµ‹è¯„æŠ¥å‘Š
æµ‹è¯•æ—¶é—´: ${new Date().toLocaleString()}
å…‘æ¢ç : ${userCode}

æ€»åˆ†: ${document.querySelector('.stat-total')?.textContent || 'N/A'}
å¹³å‡åˆ†: ${document.querySelector('.stat-average')?.textContent || 'N/A'}
é˜³æ€§é¡¹ç›®æ•°: ${document.querySelector('.stat-positive')?.textContent || 'N/A'}
æ€»ä½“çŠ¶æ€: ${document.querySelector('.status-badge')?.textContent || 'N/A'}

æ³¨ï¼šæœ¬æŠ¥å‘Šä¸ºè‡ªæˆ‘è¯„ä¼°å·¥å…·ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šè¯Šæ–­ã€‚
            `.trim();
            
            const blob = new Blob([resultText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `SCL90_æµ‹è¯„æŠ¥å‘Š_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('æµ‹è¯„æŠ¥å‘Šå·²ä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼');
        }
        
        // ==================== é¡µé¢åˆå§‹åŒ– ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            initCode();
        });
        
        // é˜²æ­¢é¡µé¢åˆ·æ–°
        window.addEventListener('beforeunload', function(e) {
            // å¦‚æœåœ¨ç­”é¢˜è¿‡ç¨‹ä¸­ï¼Œæç¤ºç”¨æˆ·
            if (document.getElementById('testScreen').style.display === 'block') {
                e.preventDefault();
                e.returnValue = 'æ‚¨æ­£åœ¨æµ‹è¯•ä¸­ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæ‚¨çš„è¿›åº¦å¯èƒ½ä¼šä¸¢å¤±ã€‚';
            }
        });
    </script>
</body>
</html>